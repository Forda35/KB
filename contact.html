<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact â€” KB International</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Nunito:wght@600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.0/css/all.css">
</head>
<body>
  <div class="wrap">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <img src="logo.png" alt="Logo Kernaugh Export" class="brand-logo">
        <div class="brand-text">KB International</div>
      </div>
      <nav class="menu">
        <a href="index.html" class="menu-item">Dashboard</a>
        <a href="about.html" class="menu-item">Ã€ propos</a>
        <a href="services.html" class="menu-item">Services</a>
        <a href="contact.html" class="menu-item active">Contact</a>
      </nav>
      <div class="quick">
        <div class="quick-title">Containers en transit</div>
        <div class="quick-value">8,430</div>
      </div>
      <div class="sidebar-footer">Â© 2025 KB International</div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <button id="themeToggle" class="theme-toggle">ğŸŒ™</button>
      <button id="langToggle" class="theme-toggle">ğŸŒ</button>
<div id="langDropdown" class="lang-dropdown" style="display:none;">
  <span class="flag" data-lang="fr">ğŸ‡«ğŸ‡·</span>
  <span class="flag" data-lang="en">ğŸ‡ºğŸ‡¸</span>
</div>
      <header class="hero glass">
        <div class="hero-left">
          <h1>Contactez-nous</h1>
          <p class="muted">Une question, un devis ou une expÃ©dition Ã  planifier ?</p>
        </div>
      </header>
        <!-- MOBILE MENU -->
         <button class="menu-toggle" id="menuToggle">
          <i class="fas fa-bars"></i>
         </button>
        <!-- OVERVIEW -->
      <section class="contact-section glass fade-in">
        <form id="contactForm" class="contact-form glass">
  <h2 class="form-title" data-i18n="contact_title">Formulaire de contact</h2>
  
  <div class="form-group">
    <label for="name">Nom complet</label>
    <input type="text" id="name" placeholder="Votre nom" required>
  </div>

  <div class="form-group">
    <label for="email">Adresse e-mail</label>
    <input type="email" id="email" placeholder="exemple@email.com" required>
  </div>

  <div class="form-group">
    <label for="message">Message</label>
    <textarea id="message" rows="4" placeholder="Votre message..." required></textarea>
  </div>

  <h3 class="muted" style="margin-top:20px;">DÃ©tails de la marchandise</h3>
  <div class="dimensions-grid">
    <input type="number" id="length" placeholder="Longueur(m)">
    <input type="number" id="width" placeholder="Largeur(m)">
    <input type="number" id="height" placeholder="Hauteur(m)">
    <input type="number" id="weight" placeholder="Poids(kg)">
  </div>

  <button type="submit" class="btn primary">
    <span class="btn-text">Envoyer</span>
    <i class="fas fa-paper-plane"></i>
  </button>
  <div class="form-status"></div>
</form>

      </section>
<canvas id="bg-canvas"></canvas>

      <!-- FOOTER -->
      <footer class="footer glass">
        <h2>KB International</h2>
        <p>Import & Export | Livraison internationale</p>
        <div class="contact">
          <p>Email : <a href="mailto:riri">riri</a> | TÃ©lÃ©phone : uuuuu</p>
        </div>
        <div class="socials">
          <a href="https://www.facebook.com/profile.php?id=61581019807722&mibextid=rS40aB7S9Ucbxw6v" class="social"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social"><i class="fab fa-x-twitter"></i></a>
          <a href="#" class="social"><i class="fab fa-whatsapp"></i></a>
        </div>
        <div class="rights">Â© 2025 KB international â€” Tous droits rÃ©servÃ©s</div>
      </footer>
    </main>
  </div>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".fade-in").forEach(el => {
    el.style.opacity = 0;
    el.style.transform = "translateY(20px)";
    setTimeout(() => {
      el.style.transition = "all .8s ease";
      el.style.opacity = 1;
      el.style.transform = "translateY(0)";
    }, 100);
  });
});

document.getElementById("contactForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const data = {
    name: document.getElementById("name").value,
    email: document.getElementById("email").value,
    message: document.getElementById("message").value,
    length: document.getElementById("length").value,
    width: document.getElementById("width").value,
    height: document.getElementById("height").value,
    weight: document.getElementById("weight").value
  };

  const btn = document.querySelector(".btn.primary");
  btn.textContent = "Envoi en cours...";
  btn.disabled = true;

  const response = await fetch("backend/send_mail.php", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  const result = await response.json();
  alert(result.message);

  btn.textContent = "Envoyer";
  btn.disabled = false;
});
 // ----- Sidebar toggle (mobile) -----
const sidebar = document.querySelector('.sidebar');
const toggleBtn = document.getElementById('menuToggle');

if (toggleBtn && sidebar) {
  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('open');
  });
}

// Fermer la sidebar quand on clique sur un lien (sur mobile)
document.querySelectorAll('.menu-item').forEach(link => {
  link.addEventListener('click', () => {
    if (window.innerWidth < 900) sidebar.classList.remove('open');
  });
});

// Dark Mode
const themeBtn = document.getElementById('themeToggle');
const body = document.body;

// Restaure le thÃ¨me sauvegardÃ©
if (localStorage.getItem('theme') === 'dark') {
  body.classList.add('dark');
  themeBtn.textContent = 'â˜€ï¸';
} else {
  themeBtn.textContent = 'ğŸŒ™';
}

// Toggle thÃ¨me et animation pulse
themeBtn.addEventListener('click', () => {
  body.classList.toggle('dark');
  const isDark = body.classList.contains('dark');
  themeBtn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  localStorage.setItem('theme', isDark ? 'dark' : 'light');

  // Ajoute la classe "clicked" avec le bon thÃ¨me pour pulse
  themeBtn.classList.remove('clicked', 'light', 'dark'); // reset
  themeBtn.classList.add('clicked', isDark ? 'dark' : 'light');

  // Retire la classe aprÃ¨s l'animation
  setTimeout(() => {
    themeBtn.classList.remove('clicked', 'light', 'dark');
  }, 500);
});


const langBtn = document.getElementById('langToggle');
const langDropdown = document.getElementById('langDropdown');

// ğŸŒ Gestion de la langue via fichiers JSON
const languageBtn = document.getElementById('langToggle');
const languageDropdown = document.getElementById('langDropdown');

let currentLang = localStorage.getItem('lang') || 'fr';

// Afficher / cacher le menu de drapeaux
langBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  langDropdown.style.display = langDropdown.style.display === 'flex' ? 'none' : 'flex';
});
document.addEventListener('click', () => langDropdown.style.display = 'none');

// Changer la langue au clic sur un drapeau
langDropdown.querySelectorAll('.flag').forEach(flag => {
  flag.addEventListener('click', async () => {
    const selectedLang = flag.getAttribute('data-lang');
    await loadLanguage(selectedLang);
    langDropdown.style.display = 'none';
  });
});

// Charger le fichier JSON et appliquer la traduction
async function loadLanguage(lang) {
  try {
    const res = await fetch(`lang/${lang}.json`);
    const translations = await res.json();

    const elements = document.querySelectorAll('[data-i18n]');

    // Animation de disparition
    elements.forEach(el => el.classList.add('fade-out'));

    // Appliquer la traduction aprÃ¨s une courte pause
    setTimeout(() => {
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[key]) el.textContent = translations[key];
      });

      // Animation dâ€™apparition
      elements.forEach(el => {
        el.classList.remove('fade-out');
        el.classList.add('fade-in');
      });
    }, 200); // durÃ©e de la transition (en ms)

    localStorage.setItem('lang', lang);
    currentLang = lang;
  } catch (err) {
    console.error('Erreur chargement traduction:', err);
  }
}

const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');

let particles = [];
let waves = [];
let mouse = { x: null, y: null };

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

/* ğŸ‡ Couleurs dynamiques (clair / sombre) */
function getColor(opacity=1) {
  const dark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  return dark
    ? `rgba(255, 215, 130, ${opacity})`   // dorÃ© chaud en mode sombre
    : `rgba(200, 160, 60, ${opacity})`;   // dorÃ© plus doux en clair
}

/* âœ¨ CrÃ©ation des particules */
class Particle {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 3 + 1;
    this.speedX = (Math.random() - 0.5) * 0.4;
    this.speedY = (Math.random() - 0.5) * 0.4;
  }

  update() {
    this.x += this.speedX;
    this.y += this.speedY;

    // rÃ©action Ã  la souris
    let dx = this.x - mouse.x;
    let dy = this.y - mouse.y;
    let distance = Math.sqrt(dx*dx + dy*dy);
    let force = Math.max(100 - distance, 0);

    if (force > 0) {
      this.x += dx / distance * 0.6;
      this.y += dy / distance * 0.6;
    }

    // reposition alÃ©atoire
    if (this.x < 0 || this.x > canvas.width ||
        this.y < 0 || this.y > canvas.height) {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
    }
  }

  draw() {
    ctx.fillStyle = getColor(0.9);
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
    ctx.fill();
  }
}

/* ğŸŒŠ Vagues lumineuses */
class Wave {
  constructor() {
    this.y = Math.random() * canvas.height;
    this.amp = Math.random() * 20 + 10;
    this.speed = 0.001 + Math.random() * 0.002;
    this.offset = Math.random()*1000;
  }

  draw(t) {
    ctx.beginPath();
    ctx.lineWidth = 0.4;
    ctx.strokeStyle = getColor(0.15);

    for (let x = 0; x < canvas.width; x += 2) {
      const y = this.y + Math.sin(x * 0.01 + t * this.speed + this.offset) * this.amp;
      ctx.lineTo(x, y);
    }

    ctx.stroke();
  }
}

function init() {
  particles = [];
  waves = [];

  for (let i = 0; i < 90; i++) particles.push(new Particle());
  for (let i = 0; i < 4; i++) waves.push(new Wave());
}
init();

/* âœ¨ Animation */
function animate(t) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  waves.forEach(w => w.draw(t));
  particles.forEach(p => {
    p.update();
    p.draw();
  });

  requestAnimationFrame(animate);
}
animate();

/* ğŸ–±ï¸ Interaction souris */
window.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

/* ğŸ“± Sur mobile : mouvement lÃ©ger au gyroscope */
window.addEventListener("deviceorientation", e => {
  mouse.x = canvas.width/2 + e.gamma * 15;
  mouse.y = canvas.height/2 + e.beta * 15;
});

</script>
</body>
</html>