<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard ‚Äî KB International</title>

  <!-- polices + styles -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Nunito:wght@600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <!-- Font Awesome public CDN (ic√¥nes) -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.5.0/css/all.css">
</head>
<body>
  <div class="wrap">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <img src="logo.png" alt="Logo KB International" class="brand-logo">
        <div class="brand-text">KB International</div>
      </div>

      <nav class="menu">
  <a href="index.html" class="menu-item active" data-i18n="menu_dashboard">Dashboard</a>
  <a href="about.html" class="menu-item" data-i18n="menu_about">√Ä propos</a>
  <a href="services.html" class="menu-item" data-i18n="menu_services">Services</a>
  <a href="contact.html" class="menu-item" data-i18n="menu_contact">Contact</a>
</nav>

      <div class="quick">
  <div class="quick-title" data-i18n="quick_containers">Containers en transit</div>
  <div class="quick-value" id="quick-containers">8,430</div>
</div>

      <!-- Quick actions -->
      <div class="quick-actions">
  <button class="btn small" id="btn-new-shipment" data-i18n="btn_add_shipment"><i class="fa-solid fa-plus"></i>Ajouter exp√©dition</button>
  <button class="btn small" id="btn-tracking" data-i18n="btn_tracking"><i class="fa-solid fa-magnifying-glass"></i> Suivi</button>
  <button class="btn small" id="btn-requests" data-i18n="btn_requests"><i class="fa-solid fa-inbox"></i> Demandes</button>
</div>

<div class="sidebar-footer" data-i18n="footer_copyright">¬© 2025 KB International</div>

    </aside>

    <!-- MAIN -->
    <main class="main">
      <button id="themeToggle" class="theme-toggle">üåô</button>
      <button id="langToggle" class="theme-toggle">üåê</button>
<div id="langDropdown" class="lang-dropdown" style="display:none;">
  <span class="flag" data-lang="fr">üá´üá∑</span>
  <span class="flag" data-lang="en">üá∫üá∏</span>
</div>



      <!-- HEADER -->
      <header class="hero glass">
        


        
        <div class="hero-left">
  <h1 data-i18n="dashboard">Tableau de bord global</h1>
  <p class="muted" data-i18n="dashboard_desc">Suivi op√©rationnel en temps r√©el ‚Äî marchandises lourdes & logistique internationale</p>
        </div>
      </header>
      <!-- MOBILE MENU -->
         <button class="menu-toggle" id="menuToggle">
          <i class="fas fa-bars"></i>
         </button>
      <!-- OVERVIEW STATISTICS -->
      <section class="overview fade-in">
  <div class="stat-card card glass">
    <h4 data-i18n="shipments">Exp√©ditions en cours</h4>
    <div class="stat-number" id="stat-shipments">245</div>
    <p class="muted small" data-i18n="shipments_desc">Actives sur le r√©seau mondial</p>
  </div>

        <div class="stat-card card glass">
    <h4 data-i18n="containers">Containers livr√©s (mois)</h4>
    <div class="stat-number" id="stat-delivered">1,243</div>
    <p class="muted small" data-i18n="containers_desc">Ce mois</p>
  </div>

        <div class="stat-card card glass">
    <h4 data-i18n="delays">Retards signal√©s</h4>
    <div class="stat-number" id="stat-delays">12</div>
    <p class="muted small" data-i18n="delays_desc">Incidents r√©cents</p>
  </div>

        <div class="stat-card card glass">
    <h4 data-i18n="revenue">Revenus estim√©s</h4>
    <div class="stat-number" id="stat-revenue">‚Ç¨1.24M</div>
    <p class="muted small" data-i18n="revenue_desc">Estimation mensuelle</p>
  </div>
      </section>

      <!-- MARKET / FREIGHT RATES -->
      <section class="freight glass fade-in">
        <h2 data-i18n="market"><i class="fas fa-chart-line"></i> Cours & march√©</h2>
        <div class="freight-cards">
          <div class="freight-card">
            <h4>Conteneur 20' (USD)</h4>
            <div class="price-row">
              <div class="price" id="price-20">2 480</div>
              <div class="currency">USD</div>
            </div>
            <div class="trend up" id="trend-20">+2.3%</div>
            <!-- tiny sparkline (inline SVG) -->
            <svg class="sparkline" viewBox="0 0 60 20" preserveAspectRatio="none"><polyline points="0,14 10,12 20,8 30,10 40,6 50,8 60,5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>

          <div class="freight-card">
            <h4>Conteneur 40' (USD)</h4>
            <div class="price-row">
              <div class="price" id="price-40">4 310</div>
              <div class="currency">USD</div>
            </div>
            <div class="trend down" id="trend-40">-1.1%</div>
            <svg class="sparkline" viewBox="0 0 60 20" preserveAspectRatio="none"><polyline points="0,10 10,8 20,12 30,9 40,6 50,9 60,11" fill="none" stroke="currentColor" stroke-width="1.5" /></svg>
          </div>

          <div class="freight-card">
            <h4>Fret a√©rien (USD/kg)</h4>
            <div class="price-row">
              <div class="price" id="price-air">4.8</div>z
              <div class="currency">USD/kg</div>
            </div>
            <div class="trend up" id="trend-air">+0.6%</div>
            <svg class="sparkline" viewBox="0 0 60 20" preserveAspectRatio="none"><polyline points="0,13 10,11 20,9 30,8 40,10 50,7 60,6" fill="none" stroke="currentColor" stroke-width="1.5" /></svg>
          </div>

          <div class="freight-card">
            <h4>Carburant (USD/baril)</h4>
            <div class="price-row">
              <div class="price" id="price-fuel">86.2</div>
              <div class="currency">USD</div>
            </div>
            <div class="trend stable" id="trend-fuel">Stable</div>
            <svg class="sparkline" viewBox="0 0 60 20" preserveAspectRatio="none"><polyline points="0,9 10,9 20,10 30,9 40,9 50,11 60,10" fill="none" stroke="currentColor" stroke-width="1.5" /></svg>
          </div>
        </div>
      </section>

      <!-- RECENT OPERATIONS -->
      <section class="operations glass fade-in">
        <h2 data-i18n="recentOps"><i class="fas fa-route"></i> Op√©rations r√©centes</h2>
        <div class="ops-list">
          <table class="shipments-table">
            <thead>
              <tr><th>ID</th><th>Vessel / Container</th><th>D√©part ‚Üí Arriv√©e</th><th>ETA</th><th>Statut</th></tr>
            </thead>
            <tbody id="ops-body">
              <tr><td>#A034</td><td>MV Horizon / C-204</td><td>Rotterdam ‚Üí Marseille</td><td>2025-10-12</td><td><span class="status in-transit">En transit</span></td></tr>
              <tr><td>#B021</td><td>SeaGiant / C-118</td><td>Shanghai ‚Üí Durban</td><td>2025-10-14</td><td><span class="status delayed">Retard</span></td></tr>
              <tr><td>#C089</td><td>AnchorSea / C-330</td><td>Santos ‚Üí New York</td><td>2025-10-16</td><td><span class="status pending">En attente</span></td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- WEATHER -->
      <section class="weather glass fade-in">
        <h2 data-i18n="weather"><i class="fas fa-cloud-sun"></i> M√©t√©o du port principal</h2>
        <div class="weather-row">
          <div class="weather-icon"><i class="fa-solid fa-water"></i></div>
          <div class="weather-details">
            <p><strong>Port :</strong> Tamatave, Madagascar</p>
            <p><strong>Conditions :</strong> 26¬∞C ¬∑ Vent 8 km/h ¬∑ Mer calme</p>
            <p class="muted small">Derni√®re MAJ : il y a 10 min</p>
          </div>
        </div>
      </section>

      <!-- FOOTER -->
      <footer class="footer glass">
        <h2 data-i18n="footer_title">KB International</h2>
        <p data-i18n="footer_desc">Import & Export | Livraison internationale</p>
        <div class="contact">
          <p>Email : <a href="mailto:riri">riri</a> | T√©l√©phone : uuuuu</p>
        </div>
        <div class="socials">
          <a href="https://www.facebook.com/profile.php?id=61581019807722&mibextid=rS40aB7S9Ucbxw6v" class="social"><i class="fa-brands fa-facebook-f"></i></a>
          <a href="#" class="social"><i class="fa-brands fa-instagram"></i></a>
          <a href="#" class="social"><i class="fa-brands fa-x-twitter"></i></a>
          <a href="#" class="social"><i class="fa-brands fa-whatsapp"></i></a>
        </div>
        <div class="rights">¬© 2025 KB INternational ‚Äî Tous droits r√©serv√©s</div>
      </footer>
    </main>
  </div>
<canvas id="bg-canvas"></canvas>

  <!-- JS : animations simples, petites mises √† jour dynamiques -->
  <script>
    // animation compteur simple
    function animateValue(id, start, end, duration=1200) {
      const obj = document.getElementById(id);
      if (!obj) return;
      const range = end - start;
      let current = start;
      const increment = range / (duration / 20);
      const timer = setInterval(() => {
        current += increment;
        if ((increment>0 && current >= end) || (increment<0 && current <= end)) {
          obj.textContent = end.toLocaleString();
          clearInterval(timer);
        } else {
          obj.textContent = Math.round(current).toLocaleString();
        }
      }, 20);
    }

    // Exemples d'animation initiales
    document.addEventListener('DOMContentLoaded', () => {
      animateValue('stat-shipments', 0, 245, 900);
      animateValue('stat-delivered', 0, 1243, 1000);
      animateValue('stat-delays', 0, 12, 700);
      // revenue (format EUR simple)
      const revEl = document.getElementById('stat-revenue');
      if (revEl) revEl.textContent = '‚Ç¨1.24M';
    });

    // Quick actions (placeholders)
    document.getElementById('btn-new-shipment').addEventListener('click', ()=> alert('Ouvrir formulaire ‚Üí Ajouter exp√©dition.'));
    document.getElementById('btn-tracking').addEventListener('click', ()=> alert('Ouvrir outil de suivi.'));
    document.getElementById('btn-requests').addEventListener('click', ()=> alert('Afficher demandes en attente.'));

    // Simuler variation cours (d√©mo; en production on r√©cup√®re via API)
    function simulateRates() {
      const rnd = (n,m)=> (Math.random()*(m-n)+n);
      document.getElementById('price-20').textContent = Math.round(rnd(2350,2550));
      document.getElementById('price-40').textContent = Math.round(rnd(4200,4420));
      document.getElementById('price-air').textContent = (rnd(4.2,5.2)).toFixed(1);
      document.getElementById('price-fuel').textContent = (rnd(80,92)).toFixed(1);
      // trends (simple)
      document.getElementById('trend-20').textContent = (Math.random()>0.5?'+':'-') + (Math.random()*3).toFixed(1) + '%';
      document.getElementById('trend-40').textContent = (Math.random()>0.5?'+':'-') + (Math.random()*2).toFixed(1) + '%';
    }
    setInterval(simulateRates, 7000);
    simulateRates();
    // ----- Sidebar toggle (mobile) -----
const sidebar = document.querySelector('.sidebar');
const toggleBtn = document.getElementById('menuToggle');

if (toggleBtn && sidebar) {
  toggleBtn.addEventListener('click', () => {
    sidebar.classList.toggle('open');
  });
}

// Fermer la sidebar quand on clique sur un lien (sur mobile)
document.querySelectorAll('.menu-item').forEach(link => {
  link.addEventListener('click', () => {
    if (window.innerWidth < 900) sidebar.classList.remove('open');
  });
});

// Dark Mode
const themeBtn = document.getElementById('themeToggle');
const body = document.body;

// Restaure le th√®me sauvegard√©
if (localStorage.getItem('theme') === 'dark') {
  body.classList.add('dark');
  themeBtn.textContent = '‚òÄÔ∏è';
} else {
  themeBtn.textContent = 'üåô';
}

// Toggle th√®me et animation pulse
themeBtn.addEventListener('click', () => {
  body.classList.toggle('dark');
  const isDark = body.classList.contains('dark');
  themeBtn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
  localStorage.setItem('theme', isDark ? 'dark' : 'light');

  // Ajoute la classe "clicked" avec le bon th√®me pour pulse
  themeBtn.classList.remove('clicked', 'light', 'dark'); // reset
  themeBtn.classList.add('clicked', isDark ? 'dark' : 'light');

  // Retire la classe apr√®s l'animation
  setTimeout(() => {
    themeBtn.classList.remove('clicked', 'light', 'dark');
  }, 500);
});



const langBtn = document.getElementById('langToggle');
const langDropdown = document.getElementById('langDropdown');

// Gestion de la langue via fichiers JSON
const languageBtn = document.getElementById('langToggle');
const languageDropdown = document.getElementById('langDropdown');

let currentLang = localStorage.getItem('lang') || 'fr';

// Afficher / cacher le menu de drapeaux
langBtn.addEventListener('click', (e) => {
  e.stopPropagation();
  langDropdown.style.display = langDropdown.style.display === 'flex' ? 'none' : 'flex';
});
document.addEventListener('click', () => langDropdown.style.display = 'none');

// Changer la langue au clic sur un drapeau
langDropdown.querySelectorAll('.flag').forEach(flag => {
  flag.addEventListener('click', async () => {
    const selectedLang = flag.getAttribute('data-lang');
    await loadLanguage(selectedLang);
    langDropdown.style.display = 'none';
  });
});

// Charger le fichier JSON et appliquer la traduction
async function loadLanguage(lang) {
  try {
    const res = await fetch(`lang/${lang}.json`);
    const translations = await res.json();

    const elements = document.querySelectorAll('[data-i18n]');

    // Animation de disparition
    elements.forEach(el => el.classList.add('fade-out'));

    // Appliquer la traduction apr√®s une courte pause
    setTimeout(() => {
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[key]) el.textContent = translations[key];
      });

      // Animation d‚Äôapparition
      elements.forEach(el => {
        el.classList.remove('fade-out');
        el.classList.add('fade-in');
      });
    }, 200); // dur√©e de la transition (en ms)

    localStorage.setItem('lang', lang);
    currentLang = lang;
  } catch (err) {
    console.error('Erreur chargement traduction:', err);
  }
}

const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');

let particles = [];
let waves = [];
let mouse = { x: null, y: null };

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener('resize', resize);

/* Couleurs dynamiques (clair / sombre) */
function getColor(opacity=1) {
  const dark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  return dark
    ? `rgba(255, 215, 130, ${opacity})`   // dor√© chaud en mode sombre
    : `rgba(200, 160, 60, ${opacity})`;   // dor√© plus doux en clair
}

/* Cr√©ation des particules */
class Particle {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 3 + 1;
    this.speedX = (Math.random() - 0.5) * 0.4;
    this.speedY = (Math.random() - 0.5) * 0.4;
  }

  update() {
    this.x += this.speedX;
    this.y += this.speedY;

    // r√©action √† la souris
    let dx = this.x - mouse.x;
    let dy = this.y - mouse.y;
    let distance = Math.sqrt(dx*dx + dy*dy);
    let force = Math.max(100 - distance, 0);

    if (force > 0) {
      this.x += dx / distance * 0.6;
      this.y += dy / distance * 0.6;
    }

    // reposition al√©atoire
    if (this.x < 0 || this.x > canvas.width ||
        this.y < 0 || this.y > canvas.height) {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height;
    }
  }

  draw() {
    ctx.fillStyle = getColor(0.9);
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
    ctx.fill();
  }
}

/* Vagues lumineuses */
class Wave {
  constructor() {
    this.y = Math.random() * canvas.height;
    this.amp = Math.random() * 20 + 10;
    this.speed = 0.001 + Math.random() * 0.002;
    this.offset = Math.random()*1000;
  }

  draw(t) {
    ctx.beginPath();
    ctx.lineWidth = 0.4;
    ctx.strokeStyle = getColor(0.15);

    for (let x = 0; x < canvas.width; x += 2) {
      const y = this.y + Math.sin(x * 0.01 + t * this.speed + this.offset) * this.amp;
      ctx.lineTo(x, y);
    }

    ctx.stroke();
  }
}

function init() {
  particles = [];
  waves = [];

  for (let i = 0; i < 90; i++) particles.push(new Particle());
  for (let i = 0; i < 4; i++) waves.push(new Wave());
}
init();

/* Animation */
function animate(t) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  waves.forEach(w => w.draw(t));
  particles.forEach(p => {
    p.update();
    p.draw();
  });

  requestAnimationFrame(animate);
}
animate();

/* Interaction souris */
window.addEventListener("mousemove", e => {
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

/* Sur mobile : mouvement l√©ger au gyroscope */
window.addEventListener("deviceorientation", e => {
  mouse.x = canvas.width/2 + e.gamma * 15;
  mouse.y = canvas.height/2 + e.beta * 15;
});


  </script>
</body>
</html>